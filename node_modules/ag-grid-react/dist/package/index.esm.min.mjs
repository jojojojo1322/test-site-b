import ps,{Component as ms}from"react";import Ae,{forwardRef as hs,useCallback as et,useContext as fs,useEffect as Cs,useImperativeHandle as gs,useLayoutEffect as ys,useMemo as tt,useRef as se,useState as xe}from"react";import{BaseComponentWrapper as vs,GridCoreCreator as ws,VanillaFrameworkOverrides as Rs,_combineAttributesAndGridOptions as bs,_getGridOption as st,_getGridRegisteredModules as Ss,_isClientSideRowModel as Ps,_isServerSideRowModel as Es,_observeResize as ks,_processOnChange as Fs,_warn as Bt}from"ag-grid-community";import Re,{forwardRef as Ms,useCallback as As,useContext as xs,useImperativeHandle as Gs,useLayoutEffect as Ds,useMemo as rt,useRef as Ge,useState as be}from"react";import{_toString as Bs}from"ag-grid-community";import It from"react";var q=It.createContext({}),Ot=It.createContext("default"),Le=(e,t,s,r)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const l=e.newAgStackInstance();let c,a,o=!1;return l.then(d=>{if(o){t.destroyBean(d);return}c=d,a=c.getGui(),s.appendChild(a),Wt(r,c)}),()=>{o=!0,c&&(a?.remove(),t.destroyBean(c),r&&Wt(r,void 0))}},Wt=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const s=e;s.current=t}};import nt from"react";import Is from"react-dom";var re=(...e)=>e.filter(s=>s!=null&&s!=="").join(" "),ne=class us{constructor(...t){this.classesMap={};for(const s of t)this.classesMap[s]=!0}setClass(t,s){if(!!this.classesMap[t]==s)return this;const n=new us;return n.classesMap={...this.classesMap},n.classesMap[t]=s,n}toString(){return Object.keys(this.classesMap).filter(s=>this.classesMap[s]).join(" ")}},De=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,s=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===s()},gt=nt.version?.split(".")[0],Tt=gt==="16"||gt==="17";function Os(){return gt==="19"}var ot=!1;function Ws(e){return ot||setTimeout(()=>ot=!1,0),ot=!0,e()}var ze=(e,t)=>{!Tt&&e&&!ot?Is.flushSync(t):t()},Ts=e=>{Tt?e():nt.startTransition(e)};function Ns(e,t,s){return nt.useSyncExternalStore?nt.useSyncExternalStore(e,t):s}function at(e,t,s){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(s||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const r=[],n=[],l=new Map,c=new Map;for(let a=0;a<t.length;a++){const o=t[a];c.set(o.instanceId,o)}for(let a=0;a<e.length;a++){const o=e[a];l.set(o.instanceId,o),c.has(o.instanceId)&&r.push(o)}for(let a=0;a<t.length;a++){const o=t[a],d=o.instanceId;l.has(d)||n.push(o)}return r.length===e.length&&n.length===0?e:r.length===0&&n.length===t.length?t:r.length===0?n:n.length===0?r:[...r,...n]}var Nt=Ms((e,t)=>{const{registry:s,context:r}=xs(q),n=Ge(null),l=Ge(null),c=Ge(null),a=Ge(null),o=Ge(null),d=Ge(),[i,b]=be(),[w,p]=be(),[P,f]=be(),[h,u]=be(()=>new ne),[E,k]=be(()=>new ne("ag-hidden")),[g,m]=be(()=>new ne("ag-hidden")),[O,x]=be(()=>new ne("ag-invisible"));Gs(t,()=>({refresh(){return!1}})),Ds(()=>Le(i,r,l.current),[i]);const _=As(T=>{if(n.current=T,!T||r.isDestroyed()){d.current=r.destroyBean(d.current);return}const F={setInnerRenderer:(M,H)=>{b(M),f(H)},setChildCount:M=>p(M),toggleCss:(M,H)=>u(A=>A.setClass(M,H)),setContractedDisplayed:M=>m(H=>H.setClass("ag-hidden",!M)),setExpandedDisplayed:M=>k(H=>H.setClass("ag-hidden",!M)),setCheckboxVisible:M=>x(H=>H.setClass("ag-invisible",!M)),setCheckboxSpacing:M=>x(H=>H.setClass("ag-group-checkbox-spacing",M))},N=s.createDynamicBean("groupCellRendererCtrl",!0);N&&(d.current=r.createBean(N),d.current.init(F,T,c.current,a.current,o.current,Nt,e))},[]),B=rt(()=>`ag-cell-wrapper ${h.toString()}`,[h]),G=rt(()=>`ag-group-expanded ${E.toString()}`,[E]),C=rt(()=>`ag-group-contracted ${g.toString()}`,[g]),v=rt(()=>`ag-group-checkbox ${O.toString()}`,[O]),y=i?.componentFromFramework,I=y?i.componentClass:void 0,R=i==null&&P!=null,j=Bs(P);return Re.createElement("span",{className:B,ref:_,...e.colDef?{}:{role:d.current?.getCellAriaRole()}},Re.createElement("span",{className:G,ref:a}),Re.createElement("span",{className:C,ref:o}),Re.createElement("span",{className:v,ref:c}),Re.createElement("span",{className:"ag-group-value",ref:l},R?j:y?Re.createElement(I,{...i.params}):null),Re.createElement("span",{className:"ag-group-child-count"},w))}),Ht=Nt;import{AgPromise as yt}from"ag-grid-community";import Ut,{memo as Hs,useEffect as Us,useState as _s}from"react";import{createContext as Vs}from"react";var je=Vs({setMethods:()=>{}}),Ls=e=>{const{initialProps:t,addUpdateCallback:s,CustomComponentClass:r,setMethods:n}=e,[{key:l,...c},a]=_s(t);return Us(()=>{s(o=>a(o))},[]),Ut.createElement(je.Provider,{value:{setMethods:n}},Ut.createElement(r,{key:l,...c}))},zs=Hs(Ls);import{createElement as js}from"react";import{createPortal as $s}from"react-dom";import{AgPromise as vt}from"ag-grid-community";var Js=0;function _t(){return`agPortalKey_${++Js}`}var Vt=class{constructor(e,t,s,r){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=s,this.suppressFallbackMethods=!!r,this.statelessComponent=this.isStateless(this.reactComponent),this.key=_t(),this.portalKey=_t(),this.instanceCreated=this.isStatelessComponent()?vt.resolve(!1):new vt(n=>{this.resolveInstanceCreated=n})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),s=document.createElement(t||"div");return s.classList.add("ag-react-container"),e.reactContainer=s,s}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const s=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!s){setTimeout(()=>this.callMethod(e,t));return}const r=s[e];if(r)return r.apply(s,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new vt(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{this.componentInstance=t,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=$s(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return js(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const s=this[`${e}Component`];if(!this.suppressFallbackMethods&&s)return s.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function ct(e,t,s){for(const r of e){const n=t[r];n&&(s[r]=n)}}var oe=class extends Vt{constructor(){super(...arguments),this.awaitUpdateCallback=new yt(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=zs}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:s=>this.setMethods(s),addUpdateCallback:s=>{this.updateCallback=()=>(s(this.getProps()),new yt(r=>{setTimeout(()=>{r()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,ct(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new yt(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},Ks=class extends oe{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},qs=class extends oe{refresh(e){this.sourceParams=e,this.refreshProps()}},Qs=class extends oe{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Ys=class extends oe{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:s,shake:r}=this;return e.label=t,e.icon=s,e.shake=r,e}};import{AgPromise as Lt}from"ag-grid-community";var Zs=class extends oe{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new Lt(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){this.expectingNewMethods===!1&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),this.resolveFilterPassCallback?.(),this.resolveFilterPassCallback=void 0}updateModel(e){this.resolveFilterPassCallback?.();const t=new Lt(s=>{this.resolveFilterPassCallback=s});this.setModel(e).then(()=>{t.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}};import{AgPromise as Xs}from"ag-grid-community";var er=class extends oe{constructor(){super(...arguments),this.awaitSetMethodsCallback=new Xs(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};import{AgPromise as tr}from"ag-grid-community";function zt(e,t){e.parentFilterInstance(s=>{(s.setModel(t)||tr.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var sr=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=s=>this.updateModel(s)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){ct(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),zt(this.floatingFilterParams,e)}},rr=class extends oe{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),zt(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},nr=class extends oe{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},or=class extends oe{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},ar=class extends oe{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},cr=class extends oe{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},ir=class extends oe{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};import{AgPromise as lr,_warn as ur}from"ag-grid-community";function dr(e,t){(e?.getInstance?.()??lr.resolve(void 0)).then(r=>t(r))}function it(){ur(231)}var pr=1e3,mr=class{constructor(e,t,s){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=s||pr}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,s){this.portals=[...this.portals,e],this.waitForInstance(t,s),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,s=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-s>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){ze(!0,()=>this.refresher()),e.rendered()&&t(e);return}window.setTimeout(()=>{this.waitForInstance(e,t,s)})}}};import $e,{memo as hr,useCallback as lt,useEffect as fr,useMemo as wt,useRef as Be,useState as Se}from"react";import{GridCtrl as Cr}from"ag-grid-community";import Je,{memo as gr,useCallback as yr,useContext as vr,useMemo as ie,useRef as de,useState as Q}from"react";import{CssClassManager as wr,FakeHScrollComp as Rr,FakeVScrollComp as br,GridBodyCtrl as Sr,_observeResize as Pr,_setAriaColCount as Er,_setAriaRowCount as kr}from"ag-grid-community";import ut,{memo as Fr,useCallback as Mr,useContext as Ar,useMemo as jt,useRef as $t,useState as Jt}from"react";import{GridHeaderCtrl as xr}from"ag-grid-community";import Ke,{memo as Gr,useCallback as Dr,useContext as Br,useRef as Rt,useState as Kt}from"react";import{HeaderRowContainerCtrl as Ir}from"ag-grid-community";import dt,{memo as Or,useCallback as qt,useContext as Wr,useMemo as bt,useRef as St,useState as pt}from"react";import{_EmptyBean as Tr}from"ag-grid-community";import qe,{memo as Nr,useCallback as Hr,useContext as Ur,useEffect as _r,useLayoutEffect as Vr,useMemo as Lr,useRef as Ie,useState as Qt}from"react";import{CssClassManager as zr,_EmptyBean as jr,_removeAriaSort as $r,_setAriaSort as Jr}from"ag-grid-community";var Kr=({ctrl:e})=>{const t=e.isAlive(),{context:s}=Ur(q),[r,n]=Qt(),[l,c]=Qt(),a=Ie(),o=Ie(null),d=Ie(null),i=Ie(null),b=Ie(),w=Ie();t&&!w.current&&(w.current=new zr(()=>o.current));const p=Hr(u=>{if(o.current=u,!u||!e.isAlive()||s.isDestroyed()){a.current=s.destroyBean(a.current);return}a.current=s.createBean(new jr);const E=()=>{const g=e.getSelectAllGui();g&&(d.current?.insertAdjacentElement("afterend",g),a.current.addDestroyFunc(()=>g.remove()))},k={setWidth:g=>{o.current&&(o.current.style.width=g)},toggleCss:(g,m)=>w.current.toggleCss(g,m),setUserStyles:g=>c(g),setAriaSort:g=>{o.current&&(g?Jr(o.current,g):$r(o.current))},setUserCompDetails:g=>n(g),getUserCompInstance:()=>b.current||void 0,refreshSelectAllGui:E,removeSelectAllGui:()=>e.getSelectAllGui()?.remove()};e.setComp(k,u,d.current,i.current,a.current),E()},[]);Vr(()=>Le(r,s,i.current,b),[r]),_r(()=>{e.setDragSource(o.current)},[r]);const P=Lr(()=>!!(r?.componentFromFramework&&De(r.componentClass)),[r]),f=r?.componentFromFramework,h=r?.componentClass;return qe.createElement("div",{ref:p,style:l,className:"ag-header-cell",role:"columnheader"},qe.createElement("div",{ref:d,className:"ag-header-cell-resize",role:"presentation"}),qe.createElement("div",{ref:i,className:"ag-header-cell-comp-wrapper",role:"presentation"},f?P?qe.createElement(h,{...r.params}):qe.createElement(h,{...r.params,ref:b}):null))},qr=Nr(Kr);import Pe,{memo as Qr,useCallback as Yr,useContext as Zr,useEffect as Xr,useLayoutEffect as en,useMemo as Oe,useRef as Ee,useState as ve}from"react";import{AgPromise as tn,_EmptyBean as sn}from"ag-grid-community";var rn=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){ct(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},nn=({ctrl:e})=>{const{context:t,gos:s}=Zr(q),[r,n]=ve(),[l,c]=ve(()=>new ne("ag-header-cell","ag-floating-filter")),[a,o]=ve(()=>new ne),[d,i]=ve(()=>new ne("ag-floating-filter-button","ag-hidden")),[b,w]=ve("false"),[p,P]=ve(),[,f]=ve(1),h=Ee(),u=Ee(null),E=Ee(null),k=Ee(null),g=Ee(null),m=Ee(),O=Ee(),x=M=>{M!=null&&m.current&&m.current(M)},_=Yr(M=>{if(u.current=M,!M||!e.isAlive()||t.isDestroyed()){h.current=t.destroyBean(h.current);return}h.current=t.createBean(new sn),O.current=new tn(A=>{m.current=A});const H={toggleCss:(A,W)=>c(J=>J.setClass(A,W)),setUserStyles:A=>n(A),addOrRemoveBodyCssClass:(A,W)=>o(J=>J.setClass(A,W)),setButtonWrapperDisplayed:A=>{i(W=>W.setClass("ag-hidden",!A)),w(A?"false":"true")},setWidth:A=>{u.current&&(u.current.style.width=A)},setCompDetails:A=>P(A),getFloatingFilterComp:()=>O.current?O.current:null,setMenuIcon:A=>g.current?.appendChild(A)};e.setComp(H,M,g.current,E.current,h.current)},[]);en(()=>Le(p,t,E.current,x),[p]);const B=Oe(()=>l.toString(),[l]),G=Oe(()=>a.toString(),[a]),C=Oe(()=>d.toString(),[d]),v=Oe(()=>!!(p&&p.componentFromFramework&&De(p.componentClass)),[p]),y=Oe(()=>s.get("reactiveCustomComponents"),[]),I=Oe(()=>s.get("enableFilterHandlers"),[]),[R,j]=ve();Xr(()=>{if(p?.componentFromFramework)if(y){const M=I?rn:sr,H=new M(p.params,()=>f(A=>A+1));x(H),j(H)}else it()},[p]);const T=R?.getProps(),F=p?.componentFromFramework,N=p?.componentClass;return Pe.createElement("div",{ref:_,style:r,className:B,role:"gridcell"},Pe.createElement("div",{ref:E,className:G,role:"presentation"},F?y?T&&Pe.createElement(je.Provider,{value:{setMethods:M=>R.setMethods(M)}},Pe.createElement(N,{...T})):Pe.createElement(N,{...p.params,ref:v?()=>{}:x}):null),Pe.createElement("div",{ref:k,"aria-hidden":b,className:C,role:"presentation"},Pe.createElement("button",{ref:g,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},on=Qr(nn);import Qe,{memo as an,useCallback as cn,useContext as ln,useEffect as un,useLayoutEffect as dn,useMemo as Pt,useRef as Ye,useState as We}from"react";import{_EmptyBean as pn}from"ag-grid-community";var mn=({ctrl:e})=>{const{context:t}=ln(q),[s,r]=We(),[n,l]=We(()=>new ne),[c,a]=We(()=>new ne),[o,d]=We("false"),[i,b]=We(),[w,p]=We(),P=Ye(),f=Ye(null),h=Ye(null),u=Ye(null),E=Ye(),k=cn(B=>{if(f.current=B,!B||!e.isAlive()||t.isDestroyed()){P.current=t.destroyBean(P.current);return}P.current=t.createBean(new pn);const G={setWidth:C=>{f.current&&(f.current.style.width=C)},toggleCss:(C,v)=>l(y=>y.setClass(C,v)),setUserStyles:C=>r(C),setHeaderWrapperHidden:C=>{const v=u.current;v&&(C?v.style.setProperty("display","none"):v.style.removeProperty("display"))},setHeaderWrapperMaxHeight:C=>{const v=u.current;v&&(C!=null?v.style.setProperty("max-height",`${C}px`):v.style.removeProperty("max-height"),v.classList.toggle("ag-header-cell-comp-wrapper-limited-height",C!=null))},setUserCompDetails:C=>p(C),setResizableDisplayed:C=>{a(v=>v.setClass("ag-hidden",!C)),d(C?"false":"true")},setAriaExpanded:C=>b(C),getUserCompInstance:()=>E.current||void 0};e.setComp(G,B,h.current,u.current,P.current)},[]);dn(()=>Le(w,t,u.current),[w]),un(()=>{f.current&&e.setDragSource(f.current)},[w]);const g=Pt(()=>!!(w?.componentFromFramework&&De(w.componentClass)),[w]),m=Pt(()=>"ag-header-group-cell "+n.toString(),[n]),O=Pt(()=>"ag-header-cell-resize "+c.toString(),[c]),x=w?.componentFromFramework,_=w?.componentClass;return Qe.createElement("div",{ref:k,style:s,className:m,role:"columnheader","aria-expanded":i},Qe.createElement("div",{ref:u,className:"ag-header-cell-comp-wrapper",role:"presentation"},x?g?Qe.createElement(_,{...w.params}):Qe.createElement(_,{...w.params,ref:E}):null),Qe.createElement("div",{ref:h,"aria-hidden":o,className:O}))},hn=an(mn),fn=({ctrl:e})=>{const{gos:t,context:s}=Wr(q),{topOffset:r,rowHeight:n}=bt(()=>e.getTopAndHeight(),[]),l=bt(()=>t.get("tabIndex"),[]),[c,a]=pt(()=>e.getAriaRowIndex()),o=e.headerRowClass,[d,i]=pt(()=>n+"px"),[b,w]=pt(()=>r+"px"),p=St(null),[P,f]=pt(()=>e.getUpdatedHeaderCtrls()),h=St(),u=St(null),E=qt(m=>{if(u.current=m,!m||!e.isAlive()||s.isDestroyed()){h.current=s.destroyBean(h.current);return}h.current=s.createBean(new Tr);const O={setHeight:x=>i(x),setTop:x=>w(x),setHeaderCtrls:(x,_,B)=>{const G=p.current,C=at(G,x,_);C!==G&&(p.current=C,ze(B,()=>f(C)))},setWidth:x=>{u.current&&(u.current.style.width=x)},setRowIndex:x=>{a(x)}};e.setComp(O,h.current,!1)},[]),k=bt(()=>({height:d,top:b}),[d,b]),g=qt(m=>{switch(e.type){case"group":return dt.createElement(hn,{ctrl:m,key:m.instanceId});case"filter":return dt.createElement(on,{ctrl:m,key:m.instanceId});default:return dt.createElement(qr,{ctrl:m,key:m.instanceId})}},[]);return dt.createElement("div",{ref:E,className:o,role:"row",style:k,tabIndex:l,"aria-rowindex":c},P.map(g))},Cn=Or(fn),gn=({pinned:e})=>{const[t,s]=Kt(!0),[r,n]=Kt([]),{context:l}=Br(q),c=Rt(null),a=Rt(null),o=Rt(),d=e==="left",i=e==="right",b=!d&&!i,w=Dr(f=>{if(c.current=f,!f||l.isDestroyed()){o.current=l.destroyBean(o.current);return}o.current=l.createBean(new Ir(e));const h={setDisplayed:s,setCtrls:u=>n(u),setCenterWidth:u=>{a.current&&(a.current.style.width=u)},setViewportScrollLeft:u=>{c.current&&(c.current.scrollLeft=u)},setPinnedContainerWidth:u=>{c.current&&(c.current.style.width=u,c.current.style.minWidth=u,c.current.style.maxWidth=u)}};o.current.setComp(h,c.current)},[]),p=t?"":"ag-hidden",P=()=>r.map(f=>Ke.createElement(Cn,{ctrl:f,key:f.instanceId}));return d?Ke.createElement("div",{ref:w,className:"ag-pinned-left-header "+p,"aria-hidden":!t,role:"rowgroup"},P()):i?Ke.createElement("div",{ref:w,className:"ag-pinned-right-header "+p,"aria-hidden":!t,role:"rowgroup"},P()):b?Ke.createElement("div",{ref:w,className:"ag-header-viewport "+p,role:"rowgroup",tabIndex:-1},Ke.createElement("div",{ref:a,className:"ag-header-container",role:"presentation"},P())):null},Et=Gr(gn),yn=()=>{const[e,t]=Jt(()=>new ne),[s,r]=Jt(),{context:n}=Ar(q),l=$t(null),c=$t(),a=Mr(i=>{if(l.current=i,!i||n.isDestroyed()){c.current=n.destroyBean(c.current);return}c.current=n.createBean(new xr);const b={toggleCss:(w,p)=>t(P=>P.setClass(w,p)),setHeightAndMinHeight:w=>r(w)};c.current.setComp(b,i,i)},[]),o=jt(()=>"ag-header "+e.toString(),[e]),d=jt(()=>({height:s,minHeight:s}),[s]);return ut.createElement("div",{ref:a,className:o,style:d,role:"presentation"},ut.createElement(Et,{pinned:"left"}),ut.createElement(Et,{pinned:null}),ut.createElement(Et,{pinned:"right"}))},vn=Fr(yn);import{useEffect as wn}from"react";var Rn=(e,t)=>{wn(()=>{const s=t.current;if(s){const r=s.parentElement;if(r){const n=document.createComment(e);return r.insertBefore(n,s),()=>{n.remove()}}}},[e])},ke=Rn;import Ze,{memo as bn,useCallback as Te,useContext as Sn,useMemo as mt,useRef as fe,useState as Yt}from"react";import{RowContainerCtrl as Pn,_getRowContainerClass as En,_getRowContainerOptions as kn,_getRowSpanContainerClass as Fn,_getRowViewportClass as Mn}from"ag-grid-community";import ht,{memo as An,useCallback as Zt,useContext as Xt,useEffect as es,useLayoutEffect as xn,useMemo as ts,useRef as pe,useState as Ce}from"react";import{CssClassManager as Gn,_EmptyBean as Dn}from"ag-grid-community";import me,{Suspense as Bn,memo as In,useCallback as Ne,useContext as On,useLayoutEffect as kt,useMemo as ft,useRef as ae,useState as ge}from"react";import{CssClassManager as Wn,_EmptyBean as Tn,_removeFromParent as Nn}from"ag-grid-community";import{AgPromise as Hn}from"ag-grid-community";var Un=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new Hn(s=>{this.resolveInstanceCreated=s}),this.onValueChange=s=>this.updateValue(s),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){ct(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}};import He from"react";import{memo as _n,useContext as Vn,useLayoutEffect as Ln,useState as zn}from"react";import{createPortal as jn}from"react-dom";import{_getActiveDomElement as $n}from"ag-grid-community";import{useEffect as Jn,useRef as Ct,useState as Kn}from"react";var qn=e=>{const t=Ct(e),s=Ct(),r=Ct(!1),n=Ct(!1),[,l]=Kn(0);r.current&&(n.current=!0),Jn(()=>(r.current||(s.current=t.current(),r.current=!0),l(c=>c+1),()=>{n.current&&s.current?.()}),[])},Qn=e=>{const[t,s]=zn(),r=Vn(q),{context:n,popupSvc:l,gos:c,editSvc:a}=r,{editDetails:o,cellCtrl:d,eParentCell:i}=e;return qn(()=>{const{compDetails:b}=o,w=c.get("stopEditingWhenCellsLoseFocus");let p,P;if(!n.isDestroyed()){P=n.createBean(a.createPopupEditorWrapper(b.params));const f=P.getGui();if(e.jsChildComp){const m=e.jsChildComp.getGui();m&&f.appendChild(m)}const{column:h,rowNode:u}=d,E={column:h,rowNode:u,type:"popupCellEditor",eventSource:i,ePopup:f,position:o.popupPosition,keepWithinBounds:!0},k=l?.positionPopupByComponent.bind(l,E),g=l?.addPopup({modal:w,eChild:f,closeOnEsc:!0,closedCallback:()=>{d.onPopupEditorClosed()},anchorToElement:i,positionCallback:k,ariaOwns:i});p=g?g.hideFunc:void 0,s(P),e.jsChildComp?.afterGuiAttached?.()}return()=>{p?.(),n.destroyBean(P)}}),Ln(()=>()=>{d.isCellFocused()&&t?.getGui().contains($n(r))&&i.focus({preventScroll:!0})},[t]),t&&e.wrappedContent?jn(e.wrappedContent,t.getGui()):null},ss=_n(Qn),Yn=(e,t,s)=>{const{compProxy:r}=e;s(r);const n=r.getProps(),l=De(t);return He.createElement(je.Provider,{value:{setMethods:c=>r.setMethods(c)}},l?He.createElement(t,{...n}):He.createElement(t,{...n,ref:c=>r.setRef(c)}))},rs=(e,t,s)=>e.compProxy?Yn(e,t,s):He.createElement(t,{...e.compDetails.params,ref:s}),Zn=(e,t,s,r,n)=>{const l=e.compDetails,c=l.componentClass,a=l.componentFromFramework&&!e.popup,o=l.componentFromFramework&&e.popup,d=!l.componentFromFramework&&e.popup;return a?rs(e,c,t):o?He.createElement(ss,{editDetails:e,cellCtrl:r,eParentCell:s,wrappedContent:rs(e,c,t)}):d&&n?He.createElement(ss,{editDetails:e,cellCtrl:r,eParentCell:s,jsChildComp:n}):null};import{useCallback as Xn,useContext as eo,useEffect as ns}from"react";var to=(e,t,s,r,n,l,c=!1)=>{const{context:a}=eo(q),o=Xn(()=>{const d=n.current;if(!d)return;const i=d.getGui();i&&i.parentElement&&i.remove(),a.destroyBean(d),n.current=void 0},[]);ns(()=>{const d=e!=null&&!c,i=e?.compDetails&&!e.compDetails.componentFromFramework,b=t&&s==null;if(!(d&&i&&!b)){o();return}const p=e.compDetails;if(n.current){const f=n.current,u=f.refresh!=null&&e.force==!1?f.refresh(p.params):!1;if(u===!0||u===void 0)return;o()}p.newAgStackInstance().then(f=>{if(!f)return;const h=f.getGui();if(!h)return;(t?s:l.current).appendChild(h),n.current=f})},[e,t,r,c]),ns(()=>o,[])},os=to;import Ft,{useMemo as so,useRef as ro}from"react";var no=({cellCtrl:e,parent:t})=>{const s=ro(),r=so(()=>{const{loadingComp:n}=e.getDeferLoadingCellRenderer();return n?{value:void 0,compDetails:n,force:!1}:void 0},[e]);if(os(r,!1,void 0,1,s,t),r?.compDetails?.componentFromFramework){const n=r.compDetails.componentClass;return Ft.createElement(n,{...r.compDetails.params})}return Ft.createElement(Ft.Fragment,null)},oo=({cellCtrl:e,printLayout:t,editingCell:s})=>{const r=On(q),{context:n}=r,{column:{colIdSanitised:l},instanceId:c}=e,a=ae(),[o,d]=ge(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[i,b]=ge(),[w,p]=ge(1),[P,f]=ge(),[h,u]=ge(!1),[E,k]=ge(!1),[g,m]=ge(!1),[O,x]=ge(),_=ft(()=>e.isForceWrapper(),[e]),B=ft(()=>e.getCellAriaRole(),[e]),G=ae(null),C=ae(null),v=ae(null),y=ae(),I=ae(),R=ae(),j=ae([]),T=ae(),F=ae(),[N,M]=ge(0),H=Ne(D=>{F.current=D,M(U=>U+1)},[]),A=o!=null&&(h||g||E)&&(i==null||!!i.popup),W=_||A,J=ft(()=>e.getCellValueClass(),[e]),le=Ne(D=>{if(I.current=D,D){const U=D.isCancelBeforeStart&&D.isCancelBeforeStart();setTimeout(()=>{U?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(D))})}},[e]),Y=ae();Y.current||(Y.current=new Wn(()=>G.current));const Fe=!!i&&!i.popup;os(o,W,F.current,N,y,G,Fe);const Me=ae();kt(()=>{const D=Me.current,U=o;if(Me.current=o,D==null||D.compDetails==null||U==null||U.compDetails==null)return;T.current?.refreshVisibility();const K=D.compDetails,$=U.compDetails;if(K.componentClass!=$.componentClass||v.current?.refresh==null)return;v.current.refresh($.params)!=!0&&p(L=>L+1)},[o]),kt(()=>{if(!(i&&!i.compDetails.componentFromFramework)||n.isDestroyed())return;const U=i.compDetails,K=i.popup===!0,$=U.newAgStackInstance();return $.then(S=>{if(!S)return;const L=S.getGui();le(S),K||((_?R:G).current?.appendChild(L),S.afterGuiAttached?.()),x(S)}),()=>{$.then(S=>{const L=S.getGui();e.disableEditorTooltipFeature(),n.destroyBean(S),le(void 0),x(void 0),L?.remove()})}},[i]);const _e=Ne(D=>{if(R.current=D,!D||n.isDestroyed()||!e.isAlive()){const $=j.current;j.current=[];for(const S of $)S();return}let U;const K=$=>{$&&(D.insertAdjacentElement("afterbegin",$.getGui()),j.current.push(()=>{Nn($.getGui()),n.destroyBean($),T.current===U&&(T.current=void 0)}))};h&&K(e.createSelectionCheckbox()),g&&K(e.createDndSource()),E&&(U=e.createRowDragComp(),T.current=U,U&&(K(U),U.refreshVisibility()))},[e,n,g,E,h]),V=Ne(()=>{const D=!e.isCellSpanning()||C.current,U=G.current;if(!U||!D||!e||!e.isAlive()||n.isDestroyed()){a.current=n.destroyBean(a.current);return}a.current=n.createBean(new Tn);const K={toggleCss:(S,L)=>Y.current.toggleCss(S,L),setUserStyles:S=>f(S),getFocusableElement:()=>G.current,setIncludeSelection:S=>u(S),setIncludeRowDrag:S=>k(S),setIncludeDndSource:S=>m(S),getCellEditor:()=>I.current??null,getCellRenderer:()=>v.current??y.current,getParentOfValue:()=>F.current??R.current??G.current,setRenderDetails:(S,L,X)=>{const ue=()=>{d(ee=>ee?.compDetails!==S||ee?.value!==L||ee?.force!==X?{value:L,compDetails:S,force:X}:ee)};if(S?.params?.deferRender&&!e.rowNode.group){const{loadingComp:ee,onReady:Ve}=e.getDeferLoadingCellRenderer();if(ee){d({value:void 0,compDetails:ee,force:!1}),Ve.then(()=>Ts(ue));return}}ue()},setEditDetails:(S,L,X,ue)=>{if(S){let ee;S.componentFromFramework&&(ue?ee=new Un(S.params,()=>p(Ve=>Ve+1)):it()),b({compDetails:S,popup:L,popupPosition:X,compProxy:ee}),L||d(void 0)}else e.hasBrowserFocus()&&K.getFocusableElement().focus({preventScroll:!0}),I.current=void 0,b(void 0)},refreshEditStyles:(S,L)=>{if(!G.current)return;const{current:X}=Y;X.toggleCss("ag-cell-value",!W),X.toggleCss("ag-cell-inline-editing",!!S&&!L),X.toggleCss("ag-cell-popup-editing",!!S&&!!L),X.toggleCss("ag-cell-not-inline-editing",!S||!!L)}},$=R.current||void 0;e.setComp(K,U,C.current??void 0,$,t,s,a.current)},[]),we=Ne(D=>{G.current=D,V()},[]),Z=Ne(D=>{C.current=D,V()},[]),ce=ft(()=>!!(o?.compDetails?.componentFromFramework&&De(o.compDetails.componentClass)),[o]);kt(()=>{if(!G.current)return;const{current:D}=Y;D.toggleCss("ag-cell-value",!W),D.toggleCss("ag-cell-inline-editing",!!i&&!i.popup),D.toggleCss("ag-cell-popup-editing",!!i&&!!i.popup),D.toggleCss("ag-cell-not-inline-editing",!i||!!i.popup)});const he=()=>{const{compDetails:D,value:U}=o;if(!D)return U?.toString?.()??U;if(D.componentFromFramework){const K=D.componentClass;return me.createElement(Bn,{fallback:me.createElement(no,{cellCtrl:e,parent:G})},ce?me.createElement(K,{...D.params,key:w}):me.createElement(K,{...D.params,key:w,ref:v}))}},ye=()=>{const D=()=>o==null?null:W?me.createElement("span",{role:"presentation",id:`cell-${c}`,className:J,ref:H},he()):he(),U=K=>Zn(K,le,G.current,e,O);return i!=null?i.popup?me.createElement(me.Fragment,null,D(),U(i)):U(i):D()},Xe=()=>me.createElement("div",{ref:we,style:P,role:B,"col-id":l},W?me.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:_e},ye()):ye());return e.isCellSpanning()?me.createElement("div",{ref:Z,className:"ag-spanned-cell-wrapper",role:"presentation"},Xe()):Xe()},ao=In(oo),co=({rowCtrl:e,containerType:t})=>{const{context:s,gos:r,editSvc:n}=Xt(q),l=Xt(Ot)==="default",c=pe(),a=pe(e.getDomOrder()),o=e.isFullWidth(),d=e.rowNode.displayed,[i,b]=Ce(()=>d?e.rowNode.getRowIndexString():null),[w,p]=Ce(()=>e.rowId),[P,f]=Ce(()=>e.businessKey),[h,u]=Ce(()=>e.rowStyles),E=pe(null),[k,g]=Ce(()=>null),[m,O]=Ce(),[x,_]=Ce(()=>d?e.getInitialRowTop(t):void 0),[B,G]=Ce(()=>d?e.getInitialTransform(t):void 0),C=pe(null),v=pe(),y=pe(),I=pe(!1),[R,j]=Ce(0);es(()=>{if(I.current||!m||R>10)return;const V=C.current?.firstChild;V?(e.setupDetailRowAutoHeight(V),I.current=!0):j(we=>we+1)},[m,R]);const T=pe();T.current||(T.current=new Gn(()=>C.current));const F=pe(()=>{}),N=Zt(V=>(F.current=V,()=>{F.current=()=>{}}),[]),M=Ns(N,()=>E.current,[]),H=l?M:k,A=Zt(V=>{if(C.current=V,c.current=V?s.createBean(new Dn):s.destroyBean(c.current),!V){e.unsetComp(t);return}if(!e.isAlive()||s.isDestroyed())return;const we={setTop:_,setTransform:G,toggleCss:(Z,ce)=>T.current.toggleCss(Z,ce),setDomOrder:Z=>a.current=Z,setRowIndex:b,setRowId:p,setRowBusinessKey:f,setUserStyles:u,setCellCtrls:(Z,ce)=>{const he=E.current,ye=at(he,Z,a.current);ye!==he&&(E.current=ye,l?F.current():ze(ce,()=>g(ye)))},showFullWidth:Z=>{y.current=Z.params,O(Z)},getFullWidthCellRenderer:()=>v.current,getFullWidthCellRendererParams:()=>y.current,refreshFullWidth:Z=>{const ce=Z();return y.current=ce,Fe.current?(O(he=>({...he,params:ce})),!0):!v.current||!v.current.refresh?!1:v.current.refresh(ce)}};e.setComp(we,V,t,c.current)},[]);xn(()=>Le(m,s,C.current,v),[m]);const W=ts(()=>{const V={top:x,transform:B};return Object.assign(V,h),V},[x,B,h]),J=o&&m?.componentFromFramework,le=!o&&H!=null,Y=ts(()=>!!(m?.componentFromFramework&&De(m.componentClass)),[m]),Fe=pe(!1);es(()=>{Fe.current=Y&&!!m&&!!r.get("reactiveCustomComponents")},[Y,m]);const Me=()=>H?.map(V=>ht.createElement(ao,{cellCtrl:V,editingCell:n?.isEditing(V,{withOpenEditor:!0})??!1,printLayout:e.printLayout,key:V.instanceId})),_e=()=>{const V=m.componentClass;return Y?ht.createElement(V,{...m.params}):ht.createElement(V,{...m.params,ref:v})};return ht.createElement("div",{ref:A,role:"row",style:W,"row-index":i,"row-id":w,"row-business-key":P},le?Me():J?_e():null)},as=An(co),io=({name:e})=>{const{context:t,gos:s}=Sn(q),r=mt(()=>kn(e),[e]),n=fe(null),l=fe(null),c=fe(null),a=fe([]),o=fe([]),[d,i]=Yt(()=>[]),b=!!s.get("enableCellSpan")&&!!r.getSpannedRowCtrls,w=fe([]),p=fe([]),[P,f]=Yt(()=>[]),h=fe(!1),u=fe(),E=mt(()=>re("ag-viewport",Mn(e)),[e]),k=mt(()=>re(En(e)),[e]),g=mt(()=>re("ag-spanning-container",Fn(e)),[e]),m=r.type==="center"||b,O=m?n:l;ke(" AG Row Container "+e+" ",O);const x=Te(()=>{const R=!m||n.current!=null,j=l.current!=null,T=!b||c.current!=null;return R&&j&&T},[]),_=Te(()=>n.current==null&&l.current==null&&c.current==null,[]),B=Te(()=>{if(_()&&(u.current=t.destroyBean(u.current)),!t.isDestroyed()&&x()){const R=F=>{const N=at(o.current,a.current,h.current);N!==o.current&&(o.current=N,ze(F,()=>i(N)))},j=F=>{const N=at(p.current,w.current,h.current);N!==p.current&&(p.current=N,ze(F,()=>f(N)))},T={setHorizontalScroll:F=>{n.current&&(n.current.scrollLeft=F)},setViewportHeight:F=>{n.current&&(n.current.style.height=F)},setRowCtrls:({rowCtrls:F,useFlushSync:N})=>{const M=!!N&&a.current.length>0&&F.length>0;a.current=F,R(M)},setSpannedRowCtrls:(F,N)=>{const M=!!N&&w.current.length>0&&F.length>0;w.current=F,j(M)},setDomOrder:F=>{h.current!=F&&(h.current=F,R(!1))},setContainerWidth:F=>{l.current&&(l.current.style.width=F)},setOffsetTop:F=>{l.current&&(l.current.style.transform=`translateY(${F})`)}};u.current=t.createBean(new Pn(e)),u.current.setComp(T,l.current,c.current??void 0,n.current)}},[x,_]),G=Te(R=>{l.current=R,B()},[B]),C=Te(R=>{c.current=R,B()},[B]),v=Te(R=>{n.current=R,B()},[B]),y=()=>Ze.createElement("div",{className:k,ref:G,role:m?"presentation":"rowgroup"},d.map(R=>Ze.createElement(as,{rowCtrl:R,containerType:r.type,key:R.instanceId})));if(!m)return y();const I=()=>Ze.createElement("div",{className:g,ref:C,role:"presentation"},P.map(R=>Ze.createElement(as,{rowCtrl:R,containerType:r.type,key:R.instanceId})));return Ze.createElement("div",{className:E,ref:v,role:"rowgroup"},y(),b?I():null)},lo=bn(io),uo=()=>{const e=vr(q),{context:t,overlays:s}=e,[r,n]=Q(""),[l,c]=Q(0),[a,o]=Q(0),[d,i]=Q("0px"),[b,w]=Q("0px"),[p,P]=Q("100%"),[f,h]=Q("0px"),[u,E]=Q("0px"),[k,g]=Q("100%"),[m,O]=Q(!0),[x,_]=Q(!0),[B,G]=Q(null),[C,v]=Q(""),[y,I]=Q(null),[R,j]=Q("ag-layout-normal"),T=de();T.current||(T.current=new wr(()=>F.current));const F=de(null),N=de(null),M=de(null),H=de(null),A=de(null),W=de(null),J=de(null),le=de([]),Y=de([]);ke(" AG Grid Body ",F),ke(" AG Pinned Top ",N),ke(" AG Sticky Top ",M),ke(" AG Middle ",W),ke(" AG Pinned Bottom ",J);const Fe=yr(S=>{if(F.current=S,!S||t.isDestroyed()){le.current=t.destroyBeans(le.current);for(const z of Y.current)z();Y.current=[];return}const L=(z,te)=>{z.appendChild(te),Y.current.push(()=>te.remove())},X=z=>{const te=t.createBean(new z);return le.current.push(te),te},ue=(z,te,ds)=>{L(z,document.createComment(ds)),L(z,X(te).getGui())};ue(S,Rr," AG Fake Horizontal Scroll ");const ee=s?.getOverlayWrapperCompClass();ee&&ue(S,ee," AG Overlay Wrapper "),A.current&&ue(A.current,br," AG Fake Vertical Scroll ");const Ve={setRowAnimationCssOnBodyViewport:n,setColumnCount:z=>{F.current&&Er(F.current,z)},setRowCount:z=>{F.current&&kr(F.current,z)},setTopHeight:c,setBottomHeight:o,setStickyTopHeight:i,setStickyTopTop:w,setStickyTopWidth:P,setTopInvisible:O,setBottomInvisible:_,setColumnMovingCss:(z,te)=>T.current.toggleCss(z,te),updateLayoutClasses:j,setAlwaysVerticalScrollClass:G,setPinnedTopBottomOverflowY:v,setCellSelectableCss:(z,te)=>I(te?z:null),setBodyViewportWidth:z=>{W.current&&(W.current.style.width=z)},registerBodyViewportResizeListener:z=>{if(W.current){const te=Pr(e,W.current,z);Y.current.push(()=>te())}},setStickyBottomHeight:h,setStickyBottomBottom:E,setStickyBottomWidth:g,setGridRootRole:z=>S.setAttribute("role",z)},Dt=t.createBean(new Sr);le.current.push(Dt),Dt.setComp(Ve,S,W.current,N.current,J.current,M.current,H.current)},[]),Me=ie(()=>re("ag-root","ag-unselectable",R),[R]),_e=ie(()=>re("ag-body-viewport",r,R,B,y),[r,R,B,y]),V=ie(()=>re("ag-body",R),[R]),we=ie(()=>re("ag-floating-top",m?"ag-invisible":null,y),[y,m]),Z=ie(()=>re("ag-sticky-top",y),[y]),ce=ie(()=>re("ag-sticky-bottom",f==="0px"?"ag-invisible":null,y),[y,f]),he=ie(()=>re("ag-floating-bottom",x?"ag-invisible":null,y),[y,x]),ye=ie(()=>({height:l,minHeight:l,overflowY:C}),[l,C]),Xe=ie(()=>({height:d,top:b,width:p}),[d,b,p]),D=ie(()=>({height:f,bottom:u,width:k}),[f,u,k]),U=ie(()=>({height:a,minHeight:a,overflowY:C}),[a,C]),K=S=>Je.createElement(lo,{name:S,key:`${S}-container`}),$=({section:S,children:L,className:X,style:ue})=>Je.createElement("div",{ref:S,className:X,role:"presentation",style:ue},L.map(K));return Je.createElement("div",{ref:Fe,className:Me},Je.createElement(vn,null),$({section:N,className:we,style:ye,children:["topLeft","topCenter","topRight","topFullWidth"]}),Je.createElement("div",{className:V,ref:A,role:"presentation"},$({section:W,className:_e,children:["left","center","right","fullWidth"]})),$({section:M,className:Z,style:Xe,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),$({section:H,className:ce,style:D,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),$({section:J,className:he,style:U,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},po=gr(uo);import Mt,{forwardRef as mo,memo as ho,useCallback as At,useContext as fo,useImperativeHandle as Co,useRef as xt}from"react";import{TabGuardClassNames as Gt,TabGuardCtrl as go}from"ag-grid-community";var yo=(e,t)=>{const{children:s,eFocusableElement:r,onTabKeyDown:n,gridCtrl:l,forceFocusOutWhenTabGuardsAreEmpty:c,isEmpty:a}=e,{context:o}=fo(q),d=xt(null),i=xt(null),b=xt(),w=u=>{const E=u==null?void 0:parseInt(u,10).toString();for(const k of[d,i])E===void 0?k.current?.removeAttribute("tabindex"):k.current?.setAttribute("tabindex",E)};Co(t,()=>({forceFocusOutOfContainer(u){b.current?.forceFocusOutOfContainer(u)}}));const p=At(()=>{const u=d.current,E=i.current;if(!u&&!E||o.isDestroyed()){b.current=o.destroyBean(b.current);return}if(u&&E){const k={setTabIndex:w};b.current=o.createBean(new go({comp:k,eTopGuard:u,eBottomGuard:E,eFocusableElement:r,onTabKeyDown:n,forceFocusOutWhenTabGuardsAreEmpty:c,focusInnerElement:g=>l.focusInnerElement(g),isEmpty:a}))}},[]),P=At(u=>{d.current=u,p()},[p]),f=At(u=>{i.current=u,p()},[p]),h=u=>{const E=u==="top"?Gt.TAB_GUARD_TOP:Gt.TAB_GUARD_BOTTOM;return Mt.createElement("div",{className:`${Gt.TAB_GUARD} ${E}`,role:"presentation",ref:u==="top"?P:f})};return Mt.createElement(Mt.Fragment,null,h("top"),s,h("bottom"))},vo=mo(yo),wo=ho(vo),Ro=({context:e})=>{const[t,s]=Se(""),[r,n]=Se(""),[l,c]=Se(null),[a,o]=Se(null),[d,i]=Se(!1),[b,w]=Se(),p=Be(),P=Be(null),f=Be(),[h,u]=Se(null),E=Be(()=>{}),k=Be(),g=Be([]),m=lt(()=>{},[]);ke(" AG Grid ",P);const O=lt(v=>{if(P.current=v,p.current=v?e.createBean(new Cr):e.destroyBean(p.current),!v||e.isDestroyed())return;const y=p.current;E.current=y.focusInnerElement.bind(y);const I={destroyGridUi:()=>{},setRtlClass:s,forceFocusOutOfContainer:R=>{if(!R&&k.current?.isDisplayed()){k.current.forceFocusOutOfContainer(R);return}f.current?.forceFocusOutOfContainer(R)},updateLayoutClasses:n,getFocusableContainers:()=>{const R=[],j=P.current?.querySelector(".ag-root");j&&R.push({getGui:()=>j});for(const T of g.current)T.isDisplayed()&&R.push(T);return R},setCursor:c,setUserSelect:o};y.setComp(I,v,v),i(!0)},[]);fr(()=>{const v=p.current,y=P.current;if(!b||!v||!h||!y||e.isDestroyed())return;const I=[],{watermarkSelector:R,paginationSelector:j,sideBarSelector:T,statusBarSelector:F,gridHeaderDropZonesSelector:N}=v.getOptionalSelectors(),M=[];if(N){const A=e.createBean(new N.component),W=A.getGui();y.insertAdjacentElement("afterbegin",W),M.push(W),I.push(A)}if(T){const A=e.createBean(new T.component),W=A.getGui(),J=h.querySelector(".ag-tab-guard-bottom");J&&(J.insertAdjacentElement("beforebegin",W),M.push(W)),I.push(A),g.current.push(A)}const H=A=>{const W=e.createBean(new A),J=W.getGui();return y.insertAdjacentElement("beforeend",J),M.push(J),I.push(W),W};if(F&&H(F.component),j){const A=H(j.component);k.current=A,g.current.push(A)}return R&&H(R.component),()=>{e.destroyBeans(I);for(const A of M)A.remove()}},[b,h,e]);const x=wt(()=>re("ag-root-wrapper",t,r),[t,r]),_=wt(()=>re("ag-root-wrapper-body","ag-focus-managed",r),[r]),B=wt(()=>({userSelect:a??"",WebkitUserSelect:a??"",cursor:l??""}),[a,l]),G=lt(v=>{f.current=v,w(v!==null)},[]),C=lt(()=>!p.current?.isFocusable(),[]);return $e.createElement("div",{ref:O,className:x,style:B,role:"presentation"},$e.createElement("div",{className:_,ref:u,role:"presentation"},d&&h&&!e.isDestroyed()&&$e.createElement(q.Provider,{value:e.getBeans()},$e.createElement(wo,{ref:G,eFocusableElement:h,onTabKeyDown:m,gridCtrl:p.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:C},$e.createElement(po,null)))))},bo=hr(Ro);import{BeanStub as So}from"ag-grid-community";var Po=class extends So{postConstruct(){if(this.beans.colAutosize){const e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){const e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(t=>t.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(t=>!!t.eGui))}},cs={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},Eo={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...cs},is=new Set(Object.keys(Eo)),ko=new Set(Object.keys(cs)),ls=e=>{const t=se(),s=se(null),r=se(null),n=se([]),l=se([]),c=se(e),a=se(),o=se(),d=se(!1),[i,b]=xe(void 0),[,w]=xe(0),p=se(),P=k=>{const g=s.current?.classList,m=(O="")=>O.trim().split(/\s+/g).filter(Boolean);if(p.current!==k){for(const O of m(p.current))g?.contains(O)&&g.remove(O);for(const O of m(k))g?.contains(O)||g?.add(O);p.current=k}};ys(()=>{P(e.className)},[e.className]);const f=et(k=>{if(s.current=k,P(e.className),!k){for(const y of n.current)y();n.current.length=0;return}const g=e.modules||[];r.current||(r.current=new mr(()=>w(y=>y+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),n.current.push(()=>{r.current?.destroy(),r.current=null}));const m=bs(e.gridOptions,e,Object.keys(e).filter(y=>!is.has(y))),O=()=>{if(d.current){const y=()=>a.current?.shouldQueueUpdates()?void 0:l.current.shift();let I=y();for(;I;)I(),I=y()}},x=new xo(O);a.current=x;const _=new Po,B={providedBeanInstances:{frameworkCompWrapper:new Mo(r.current,m),renderStatus:_},modules:g,frameworkOverrides:x,setThemeOnGridDiv:!0},G=y=>{b(y),y.createBean(_),n.current.push(()=>{y.destroy()}),y.getBean("ctrlsSvc").whenReady({addDestroyFunc:I=>{n.current.push(I)}},()=>{if(y.isDestroyed())return;const I=t.current;I&&e.passGridApi?.(I)})},C=y=>{y.getBean("ctrlsSvc").whenReady({addDestroyFunc:I=>{n.current.push(I)}},()=>{for(const I of l.current)I();l.current.length=0,d.current=!0})},v=new ws;m.gridId??(m.gridId=o.current),t.current=v.create(k,m,G,C,B),n.current.push(()=>{t.current=void 0}),t.current&&(o.current=t.current.getGridId())},[]),h=tt(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),u=et(k=>{d.current&&!a.current?.shouldQueueUpdates()?k():l.current.push(k)},[]);Cs(()=>{const k=Fo(c.current,e);c.current=e,u(()=>{t.current&&Fs(k,t.current)})},[e]);const E=!Ae.useSyncExternalStore||st(e,"renderingMode")==="legacy"?"legacy":"default";return Ae.createElement("div",{style:h,ref:f},Ae.createElement(Ot.Provider,{value:E},i&&!i.isDestroyed()?Ae.createElement(bo,{key:i.instanceId,context:i}):null,r.current?.getPortals()??null))};function Fo(e,t){const s={};for(const r of Object.keys(t)){if(is.has(r)){ko.has(r)&&Bt(274,{prop:r});continue}const n=t[r];e[r]!==n&&(s[r]=n)}return s}var Mo=class extends vs{constructor(e,t){super(),this.parent=e,this.gridOptions=t}createWrapper(e,t){const s=this.gridOptions;if(st(s,"reactiveCustomComponents")){const c=(a=>{switch(a){case"filter":return st(s,"enableFilterHandlers")?er:Zs;case"floatingFilterComponent":return st(s,"enableFilterHandlers")?nr:rr;case"dateComponent":return Qs;case"dragAndDropImageComponent":return Ys;case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":return qs;case"statusPanel":return cr;case"toolPanel":return ir;case"menuItem":return ar;case"cellRenderer":return Ks;case"innerHeaderComponent":return or}})(t.name);if(c)return new c(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":it();break}const n=!t.cellRenderer&&t.name!=="toolPanel";return new Vt(e,this.parent,t,n)}},Ao=hs((e,t)=>{const s=fs(q),{registry:r,context:n,gos:l,rowModel:c}=s,[a,o]=xe(()=>new ne),[d,i]=xe(()=>new ne),[b,w]=xe(),[p,P]=xe(),f=se(),h=se(null),u=se(),E=tt(()=>Ss(e.api.getGridId(),b?.rowModelType??"clientSide"),[e]),k=tt(()=>a.toString()+" ag-details-row",[a]),g=tt(()=>d.toString()+" ag-details-grid",[d]);t&&gs(t,()=>({refresh(){return f.current?.refresh()??!1}})),e.template&&Bt(230);const m=et(x=>{if(h.current=x,!x||n.isDestroyed()){f.current=n.destroyBean(f.current),u.current?.();return}const _={toggleCss:(G,C)=>o(v=>v.setClass(G,C)),toggleDetailGridCss:(G,C)=>i(v=>v.setClass(G,C)),setDetailGrid:G=>w(G),setRowData:G=>P(G),getGui:()=>h.current},B=r.createDynamicBean("detailCellRendererCtrl",!0);if(B&&(n.createBean(B),B.init(_,e),f.current=B,l.get("detailRowAutoHeight"))){const G=()=>{if(h.current==null)return;const C=h.current.clientHeight;C!=null&&C>0&&setTimeout(()=>{e.node.setRowHeight(C),(Ps(l,c)||Es(l,c))&&c.onRowHeightChanged()},0)};u.current=ks(s,x,G),G()}},[]),O=et(x=>{f.current?.registerDetailWithMaster(x)},[]);return Ae.createElement("div",{className:k,ref:m},b&&Ae.createElement(ls,{className:g,...b,modules:E,rowData:p,passGridApi:O}))}),xo=class extends Rs{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:Ht,agGroupRowRenderer:Ht,agDetailCellRenderer:Ao},this.wrapIncoming=(t,s)=>s==="ensureVisible"?Ws(t):t()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return Os()}},Go=class extends ms{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e;for(const t of this.apiListeners)t(e)}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return ps.createElement(ls,{...this.props,passGridApi:this.setGridApi})}};import{useContext as Do}from"react";function Ue(e){const{setMethods:t}=Do(je);t(e)}function Bo(e){Ue(e)}function Io(e){return Ue(e)}function Oo(e){return Ue(e)}function Wo(e){return Ue(e)}function To(e){Ue(e)}function No(e){Ue(e)}export{Go as AgGridReact,je as CustomComponentContext,dr as getInstance,Bo as useGridCellEditor,Io as useGridDate,Oo as useGridFilter,Wo as useGridFilterDisplay,To as useGridFloatingFilter,No as useGridMenuItem,it as warnReactiveCustomComponents};
